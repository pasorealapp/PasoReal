<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" 
      content="width=device-width, 
               initial-scale=1.0, 
               maximum-scale=1.0, 
               minimum-scale=1.0, 
               user-scalable=no,
               viewport-fit=cover">
  <title>PasoReal Pro - Realidad Virtual 360° con IA</title>
  
  <!-- PWA Configuration -->
  <meta name="theme-color" content="#0f172a">
  <meta name="description" content="Sistema avanzado de realidad virtual 360° con IA para entrenamiento y exploración">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/apple-icon.png">
  
  <!-- Preconnect critical domains -->
  <link rel="preconnect" href="https://customer-cw0heb9gadqlxjsv.cloudflarestream.com">
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://aframe.io">
  
  <!-- CSS -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  
  <!-- JavaScript Libraries -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection@latest"></script>
  
  <!-- iOS specific -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="PasoReal Pro">
  <meta name="format-detection" content="telephone=no">
  
  <!-- Open Graph -->
  <meta property="og:title" content="PasoReal Pro - Realidad Virtual 360°">
  <meta property="og:description" content="Experiencia inmersiva con IA para entrenamiento y exploración">
  <meta property="og:image" content="icons/icon-512.png">
  <meta property="og:url" content="https://pasoreal.pro">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Audio Elements -->
  <audio id="ambientSound" loop></audio>
  <audio id="achievementSound"></audio>
  <audio id="notificationSound"></audio>
  
  <!-- Loading Screen -->
  <div id="loadingScreen" class="screen active">
    <div class="loading-content">
      <div class="logo-animation">
        <div class="logo-circle"></div>
        <div class="logo-pulse"></div>
        <h1 class="logo-text">PASOREAL<span class="logo-pro">PRO</span></h1>
      </div>
      <div class="loading-progress">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <span id="loadingText">Inicializando sistema IA...</span>
        <div class="loading-stats">
          <div class="stat-item">
            <i class="fas fa-brain"></i>
            <span>Cargando red neuronal...</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-video"></i>
            <span>Preparando video 360°...</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-map"></i>
            <span>Cargando mapas...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main App Container -->
  <div id="appContainer" style="display: none;">
    
    <!-- VIDEO FONDO LOGIN -->
    <video id="bgVideo" autoplay muted loop playsinline webkit-playsinline preload="auto" crossorigin="anonymous"></video>

    <!-- LOGIN Screen -->
    <div id="login" class="screen">
      <div class="login-container">
        <div class="brand-header">
          <h1 class="brand-title">
            <i class="fas fa-walking"></i> PasoReal<span class="pro-badge">PRO</span>
          </h1>
          <p class="brand-subtitle">Realidad Virtual 360° con Inteligencia Artificial</p>
        </div>
        
        <div class="login-card">
          <div class="card-header">
            <h2><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</h2>
            <p class="card-subtitle">Accede a tu experiencia inmersiva</p>
          </div>
          
          <form id="loginForm">
            <div class="input-group">
              <i class="fas fa-envelope input-icon"></i>
              <input type="email" id="loginEmail" placeholder="Correo electrónico" required>
              <div class="input-validation"></div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-lock input-icon"></i>
              <input type="password" id="loginPassword" placeholder="Contraseña" required>
              <button type="button" class="toggle-password" id="togglePassword">
                <i class="fas fa-eye"></i>
              </button>
              <div class="input-validation"></div>
            </div>
            
            <div class="form-options">
              <label class="checkbox">
                <input type="checkbox" id="rememberMe">
                <span>Recordar sesión</span>
              </label>
              <a href="#" class="text-link" id="forgotPassword">¿Olvidaste tu contraseña?</a>
            </div>
            
            <button type="submit" class="btn-primary btn-lg" id="loginBtn">
              <i class="fas fa-rocket"></i> Iniciar Experiencia
            </button>
            
            <div class="social-login">
              <p class="divider">o continuar con</p>
              <div class="social-buttons">
                <button type="button" class="btn-social google">
                  <i class="fab fa-google"></i> Google
                </button>
                <button type="button" class="btn-social apple">
                  <i class="fab fa-apple"></i> Apple
                </button>
              </div>
            </div>
            
            <div class="login-footer">
              <p>¿No tienes cuenta? <a href="#" class="text-link" id="goRegisterBtn">Regístrate aquí</a></p>
              <p class="small-text">Al registrarte, aceptas nuestros <a href="#" class="text-link">Términos</a> y <a href="#" class="text-link">Política de Privacidad</a></p>
            </div>
          </form>
        </div>
        
        <div class="login-features">
          <div class="feature-item">
            <i class="fas fa-robot"></i>
            <span>IA Personalizada</span>
          </div>
          <div class="feature-item">
            <i class="fas fa-vr-cardboard"></i>
            <span>VR 360°</span>
          </div>
          <div class="feature-item">
            <i class="fas fa-heartbeat"></i>
            <span>Fitness Tracking</span>
          </div>
          <div class="feature-item">
            <i class="fas fa-trophy"></i>
            <span>Logros</span>
          </div>
        </div>
      </div>
    </div>

    <!-- REGISTER Screen -->
    <div id="register" class="screen">
      <div class="login-container">
        <div class="brand-header">
          <h1 class="brand-title">
            <i class="fas fa-user-plus"></i> Crear Cuenta
          </h1>
          <p class="brand-subtitle">Comienza tu viaje inmersivo</p>
        </div>
        
        <div class="login-card">
          <div class="card-header">
            <h2><i class="fas fa-user-circle"></i> Perfil Personal</h2>
            <p class="card-subtitle">Configura tu experiencia ideal</p>
          </div>
          
          <form id="registerForm">
            <div class="row">
              <div class="input-group">
                <i class="fas fa-user input-icon"></i>
                <input type="text" id="firstName" placeholder="Nombre" required>
                <div class="input-validation"></div>
              </div>
              <div class="input-group">
                <input type="text" id="lastName" placeholder="Apellido" required>
                <div class="input-validation"></div>
              </div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-envelope input-icon"></i>
              <input type="email" id="registerEmail" placeholder="Correo electrónico" required>
              <div class="input-validation"></div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-lock input-icon"></i>
              <input type="password" id="registerPassword" placeholder="Contraseña (mínimo 8 caracteres)" required>
              <div class="password-strength">
                <div class="strength-bar"></div>
              </div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-calendar-alt input-icon"></i>
              <input type="date" id="birthDate" required>
              <div class="input-validation"></div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-venus-mars input-icon"></i>
              <select id="gender" required>
                <option value="">Género</option>
                <option value="male">Masculino</option>
                <option value="female">Femenino</option>
                <option value="other">Otro</option>
              </select>
              <div class="input-validation"></div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-ruler input-icon"></i>
              <input type="number" id="height" placeholder="Estatura (cm)" required>
              <div class="input-validation"></div>
            </div>
            
            <div class="input-group">
              <i class="fas fa-weight input-icon"></i>
              <input type="number" id="weight" placeholder="Peso (kg)" required>
              <div class="input-validation"></div>
            </div>
            
            <div class="form-section">
              <h3><i class="fas fa-bullseye"></i> Objetivos de Fitness</h3>
              <div class="goals-grid">
                <label class="goal-card">
                  <input type="radio" name="goal" value="weightloss" required>
                  <div class="goal-content">
                    <i class="fas fa-fire"></i>
                    <span>Pérdida de peso</span>
                  </div>
                </label>
                <label class="goal-card">
                  <input type="radio" name="goal" value="fitness">
                  <div class="goal-content">
                    <i class="fas fa-running"></i>
                    <span>Acondicionamiento</span>
                  </div>
                </label>
                <label class="goal-card">
                  <input type="radio" name="goal" value="stress">
                  <div class="goal-content">
                    <i class="fas fa-spa"></i>
                    <span>Reducción de estrés</span>
                  </div>
                </label>
                <label class="goal-card">
                  <input type="radio" name="goal" value="exploration">
                  <div class="goal-content">
                    <i class="fas fa-globe-americas"></i>
                    <span>Exploración</span>
                  </div>
                </label>
              </div>
            </div>
            
            <div class="form-options">
              <label class="checkbox">
                <input type="checkbox" id="terms" required>
                <span>Acepto los Términos de Servicio y Política de Privacidad</span>
              </label>
              <label class="checkbox">
                <input type="checkbox" id="newsletter">
                <span>Recibir notificaciones y ofertas especiales</span>
              </label>
            </div>
            
            <button type="submit" class="btn-primary btn-lg" id="registerBtn">
              <i class="fas fa-magic"></i> Crear Experiencia Personalizada
            </button>
            
            <div class="login-footer">
              <p>¿Ya tienes cuenta? <a href="#" class="text-link" id="goLoginBtn">Inicia sesión</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="dashboard" class="screen">
      <!-- Navigation Bar -->
      <nav class="navbar">
        <div class="nav-left">
          <button class="nav-btn" id="menuToggle">
            <i class="fas fa-bars"></i>
          </button>
          <div class="user-greeting">
            <span id="userGreeting">¡Hola, Explorador!</span>
            <small id="userMotivation">El mundo te espera</small>
          </div>
        </div>
        <div class="nav-center">
          <h1 class="nav-title">
            <i class="fas fa-compass"></i> PasoReal<span class="pro-badge">PRO</span>
          </h1>
        </div>
        <div class="nav-right">
          <button class="nav-btn notification-btn" id="notificationBtn">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <div class="user-avatar" id="userMenuBtn">
            <img src="" alt="User" id="userAvatar">
          </div>
        </div>
      </nav>
      
      <!-- Sidebar Menu -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-user">
            <img src="" alt="User" id="sidebarAvatar">
            <div class="user-info">
              <h3 id="sidebarUserName">Usuario</h3>
              <span class="user-level" id="userLevel">Nivel 1</span>
            </div>
          </div>
          <button class="close-sidebar" id="closeSidebar">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="sidebar-menu">
          <a href="#" class="menu-item active" data-screen="home">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
          </a>
          <a href="#" class="menu-item" data-screen="explore">
            <i class="fas fa-globe-americas"></i>
            <span>Explorar</span>
          </a>
          <a href="#" class="menu-item" data-screen="workouts">
            <i class="fas fa-dumbbell"></i>
            <span>Entrenamientos</span>
            <span class="menu-badge">Nuevo</span>
          </a>
          <a href="#" class="menu-item" data-screen="challenges">
            <i class="fas fa-trophy"></i>
            <span>Desafíos</span>
          </a>
          <a href="#" class="menu-item" data-screen="social">
            <i class="fas fa-users"></i>
            <span>Social</span>
            <span class="menu-badge" id="socialBadge">5</span>
          </a>
          <a href="#" class="menu-item" data-screen="stats">
            <i class="fas fa-chart-line"></i>
            <span>Estadísticas</span>
          </a>
          <a href="#" class="menu-item" data-screen="aiCoach">
            <i class="fas fa-robot"></i>
            <span>Coach IA</span>
          </a>
          <a href="#" class="menu-item" data-screen="settings">
            <i class="fas fa-cog"></i>
            <span>Configuración</span>
          </a>
        </div>
        
        <div class="sidebar-footer">
          <div class="user-stats">
            <div class="stat">
              <span class="stat-value" id="stepsToday">0</span>
              <span class="stat-label">Pasos hoy</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="currentStreak">0</span>
              <span class="stat-label">Días racha</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="xpPoints">0</span>
              <span class="stat-label">XP</span>
            </div>
          </div>
          <button class="btn-logout" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
          </button>
        </div>
      </div>
      
      <!-- Main Content Area -->
      <div class="main-content" id="mainContent">
        <!-- Home Screen -->
        <div class="screen-section active" id="homeScreen">
          <div class="dashboard-hero">
            <div class="hero-content">
              <h1 class="hero-title" id="dailyGreeting">Buenos días</h1>
              <p class="hero-subtitle" id="dailyMotivation">¡Es un gran día para explorar!</p>
              <div class="hero-stats">
                <div class="hero-stat">
                  <i class="fas fa-fire"></i>
                  <div>
                    <span class="stat-number" id="caloriesToday">0</span>
                    <span class="stat-label">Calorías</span>
                  </div>
                </div>
                <div class="hero-stat">
                  <i class="fas fa-road"></i>
                  <div>
                    <span class="stat-number" id="distanceToday">0.0</span>
                    <span class="stat-label">Km hoy</span>
                  </div>
                </div>
                <div class="hero-stat">
                  <i class="fas fa-clock"></i>
                  <div>
                    <span class="stat-number" id="activeTime">0</span>
                    <span class="stat-label">Min activo</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="hero-weather">
              <div class="weather-card" id="weatherCard">
                <i class="fas fa-sun"></i>
                <div>
                  <span class="weather-temp">25°C</span>
                  <span class="weather-location">Ciudad de México</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="quick-actions">
            <h2 class="section-title">
              <i class="fas fa-bolt"></i> Acciones Rápidas
            </h2>
            <div class="actions-grid">
              <button class="action-card primary-action" id="quickStartRoute">
                <i class="fas fa-play-circle"></i>
                <span>Iniciar Ruta</span>
              </button>
              <button class="action-card" id="quickChallenge">
                <i class="fas fa-trophy"></i>
                <span>Desafío Diario</span>
              </button>
              <button class="action-card" id="quickSocial">
                <i class="fas fa-users"></i>
                <span>Unirse a Grupo</span>
              </button>
              <button class="action-card" id="quickAI">
                <i class="fas fa-robot"></i>
                <span>Coach IA</span>
              </button>
            </div>
          </div>
          
          <div class="recommended-routes">
            <div class="section-header">
              <h2 class="section-title">
                <i class="fas fa-star"></i> Recomendado para ti
              </h2>
              <a href="#" class="see-all">Ver todo</a>
            </div>
            <div class="routes-carousel" id="recommendedRoutes">
              <!-- Filled by JavaScript -->
            </div>
          </div>
          
          <div class="achievements-section">
            <div class="section-header">
              <h2 class="section-title">
                <i class="fas fa-award"></i> Logros Recientes
              </h2>
              <a href="#" class="see-all">Ver todos</a>
            </div>
            <div class="achievements-grid" id="recentAchievements">
              <!-- Filled by JavaScript -->
            </div>
          </div>
          
          <div class="ai-insights">
            <div class="insight-card">
              <div class="insight-header">
                <i class="fas fa-brain"></i>
                <h3>Insights de IA</h3>
              </div>
              <p id="aiInsightText">Basado en tu actividad, podrías mejorar tu ritmo en un 15% si...</p>
              <button class="btn-text" id="viewInsightDetails">Ver detalles</button>
            </div>
          </div>
        </div>
        
        <!-- Explore Screen -->
        <div class="screen-section" id="exploreScreen">
          <!-- This will be filled dynamically -->
        </div>
        
        <!-- Other screens will be added similarly -->
      </div>
    </div>
    
    <!-- VR Experience Container -->
    <div id="vrExperience" class="screen">
      <!-- This is where the 360° experience happens -->
    </div>
    
    <!-- AI Coach Modal -->
    <div id="aiCoachModal" class="modal">
      <div class="modal-content ai-coach">
        <div class="coach-header">
          <div class="coach-avatar">
            <i class="fas fa-robot"></i>
          </div>
          <div class="coach-info">
            <h3>Coach IA - Alex</h3>
            <span class="coach-specialty">Especialista en Fitness y Bienestar</span>
          </div>
          <button class="close-modal">&times;</button>
        </div>
        <div class="coach-messages" id="coachChat">
          <!-- Chat messages -->
        </div>
        <div class="coach-input">
          <input type="text" id="coachInput" placeholder="Pregúntale a tu coach IA...">
          <button id="sendCoachMessage">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="panel">
      <div class="panel-header">
        <h3>Notificaciones</h3>
        <button class="panel-close">&times;</button>
      </div>
      <div class="notifications-list" id="notificationsList">
        <!-- Notifications -->
      </div>
    </div>
    
    <!-- Background Elements -->
    <div class="background-effects">
      <div class="particles-container" id="particles"></div>
      <div class="gradient-overlay"></div>
    </div>
  </div>
  
  <!-- JavaScript Files -->
  <script src="app.js"></script>
  <script src="ai-engine.js"></script>
  <script src="fitness-tracker.js"></script>
  <script src="social-features.js"></script>
  <script src="premium-features.js"></script>
  <script>
    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</body>
</html>